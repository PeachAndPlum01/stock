# è‚¡ç¥¨æŠ•èµ„ä¿¡æ¯å±•ç¤ºç³»ç»Ÿ - å¾®æœåŠ¡ç‰ˆ

## é¡¹ç›®ç®€ä»‹
è¿™æ˜¯ä¸€ä¸ªåŸºäºå¾®æœåŠ¡æ¶æ„çš„è‚¡ç¥¨æŠ•èµ„ä¿¡æ¯å±•ç¤ºç³»ç»Ÿï¼Œæ”¯æŒåŸºäºä¸­å›½åœ°å›¾çš„å¯è§†åŒ–æŠ•èµ„ä¿¡æ¯å±•ç¤ºã€‚é‡‡ç”¨Spring Cloudå¾®æœåŠ¡æŠ€æœ¯æ ˆï¼Œå®ç°æœåŠ¡è§£è€¦å’Œç‹¬ç«‹éƒ¨ç½²ã€‚

## ğŸ¯ é¡¹ç›®çŠ¶æ€

**å½“å‰ç‰ˆæœ¬ï¼šå¾®æœåŠ¡æ¶æ„ v1.0.0ï¼ˆâœ… å·²å®Œæˆï¼‰**

### âœ… å·²å®Œæˆï¼ˆ2026-02-01ï¼‰
- âœ… å¾®æœåŠ¡ç›®å½•ç»“æ„
- âœ… çˆ¶POMé…ç½®
- âœ… APIç½‘å…³æœåŠ¡ï¼ˆstock-gatewayï¼‰
- âœ… è®¤è¯æœåŠ¡ï¼ˆstock-auth-serviceï¼‰
- âœ… è‚¡ç¥¨æ•°æ®æœåŠ¡ï¼ˆstock-data-serviceï¼‰
- âœ… æŠ•èµ„ä¿¡æ¯æœåŠ¡ï¼ˆstock-investment-serviceï¼‰
- âœ… çœä»½å…³è”æœåŠ¡ï¼ˆstock-correlation-serviceï¼‰
- âœ… Dockerå®¹å™¨åŒ–æ”¯æŒ
- âœ… å®Œæ•´çš„APIæ¥å£
- âœ… è¯¦ç»†çš„é¡¹ç›®æ–‡æ¡£

**ä»£ç ç»Ÿè®¡**ï¼š30ä¸ªJavaæ–‡ä»¶ï¼Œ5ä¸ªé…ç½®æ–‡ä»¶ï¼Œ5ä¸ªDockerfileï¼Œ8ä¸ªæ–‡æ¡£æ–‡ä»¶

## ğŸ—ï¸ å¾®æœåŠ¡æ¶æ„

```
å‰ç«¯ (5173)
    â†“
APIç½‘å…³ (8080)
    â†“
    â”œâ”€â†’ è®¤è¯æœåŠ¡ (8081)
    â”œâ”€â†’ è‚¡ç¥¨æ•°æ®æœåŠ¡ (8082)
    â”œâ”€â†’ æŠ•èµ„ä¿¡æ¯æœåŠ¡ (8083)
    â””â”€â†’ çœä»½å…³è”æœåŠ¡ (8084)
```

## ğŸ“¦ æœåŠ¡åˆ—è¡¨

| æœåŠ¡åç§° | ç«¯å£ | çŠ¶æ€ | è¯´æ˜ |
|---------|------|------|------|
| stock-gateway | 8080 | âœ… | APIç½‘å…³ã€è·¯ç”±è½¬å‘ã€JWTéªŒè¯ |
| stock-auth-service | 8081 | âœ… | ç”¨æˆ·è®¤è¯ã€ç™»å½•æ³¨å†Œã€Tokenç®¡ç† |
| stock-data-service | 8082 | âœ… | è‚¡ç¥¨æ•°æ®è·å–ã€Tushare APIã€å®æ—¶æ¨é€ |
| stock-investment-service | 8083 | âœ… | æŠ•èµ„ä¿¡æ¯æŸ¥è¯¢ã€ç»Ÿè®¡åˆ†æ |
| stock-correlation-service | 8084 | âœ… | çœä»½å…³è”åº¦è®¡ç®—ã€ç›¸å…³åº¦åˆ†æ |

## æŠ€æœ¯æ ˆ

### åç«¯ï¼ˆå¾®æœåŠ¡ï¼‰
- **å¾®æœåŠ¡æ¡†æ¶**: Spring Boot 2.7.18 + Spring Cloud 2021.0.8
- **APIç½‘å…³**: Spring Cloud Gateway
- **æ•°æ®åº“**: MySQL 8.0 + MyBatis Plus
- **ç¼“å­˜**: Redis
- **æ¶ˆæ¯é˜Ÿåˆ—**: RabbitMQ
- **è®¤è¯**: JWT
- **è‚¡ç¥¨æ•°æ®**: Tushare API

### å‰ç«¯
- Vue 3
- Element Plus
- ECharts 5ï¼ˆä¸­å›½åœ°å›¾ï¼‰
- Axios
- Vue Router
- Pinia

## é¡¹ç›®ç»“æ„
```
stock-microservices/
â”œâ”€â”€ pom.xml                          # çˆ¶POMï¼Œç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬
â”œâ”€â”€ docker-compose.yml               # Docker Composeç¼–æ’æ–‡ä»¶
â”œâ”€â”€ .env.template                    # ç¯å¢ƒå˜é‡é…ç½®æ¨¡æ¿
â”œâ”€â”€ start-all.sh                     # å¯åŠ¨æ‰€æœ‰æœåŠ¡è„šæœ¬
â”œâ”€â”€ stop-all.sh                      # åœæ­¢æ‰€æœ‰æœåŠ¡è„šæœ¬
â”œâ”€â”€ stock-gateway/                   # APIç½‘å…³ (8080) âœ…
â”‚   â”œâ”€â”€ src/main/java/com/stock/gateway/
â”‚   â”‚   â”œâ”€â”€ GatewayApplication.java
â”‚   â”‚   â”œâ”€â”€ config/CorsConfig.java
â”‚   â”‚   â””â”€â”€ filter/AuthFilter.java
â”‚   â”œâ”€â”€ src/main/resources/application.yml
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ pom.xml
â”œâ”€â”€ stock-auth-service/              # è®¤è¯æœåŠ¡ (8081) âœ…
â”‚   â”œâ”€â”€ src/main/java/com/stock/auth/
â”‚   â”‚   â”œâ”€â”€ AuthServiceApplication.java
â”‚   â”‚   â”œâ”€â”€ entity/User.java
â”‚   â”‚   â”œâ”€â”€ mapper/UserMapper.java
â”‚   â”‚   â”œâ”€â”€ service/AuthService.java
â”‚   â”‚   â”œâ”€â”€ controller/AuthController.java
â”‚   â”‚   â”œâ”€â”€ util/JwtUtil.java
â”‚   â”‚   â””â”€â”€ config/RedisConfig.java
â”‚   â”œâ”€â”€ src/main/resources/application.yml
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ pom.xml
â”œâ”€â”€ stock-data-service/              # è‚¡ç¥¨æ•°æ®æœåŠ¡ (8082) âœ…
â”‚   â”œâ”€â”€ src/main/java/com/stock/data/
â”‚   â”‚   â”œâ”€â”€ StockDataServiceApplication.java
â”‚   â”‚   â”œâ”€â”€ client/TushareApiClient.java
â”‚   â”‚   â”œâ”€â”€ service/StockRealtimeService.java
â”‚   â”‚   â”œâ”€â”€ controller/StockDataController.java
â”‚   â”‚   â”œâ”€â”€ model/StockQuote.java
â”‚   â”‚   â”œâ”€â”€ rabbitmq/
â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ common/Result.java
â”‚   â”œâ”€â”€ src/main/resources/application.yml
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ pom.xml
â”œâ”€â”€ stock-investment-service/        # æŠ•èµ„ä¿¡æ¯æœåŠ¡ (8083) âœ…
â”‚   â”œâ”€â”€ src/main/java/com/stock/investment/
â”‚   â”‚   â”œâ”€â”€ InvestmentServiceApplication.java
â”‚   â”‚   â”œâ”€â”€ entity/InvestmentInfo.java
â”‚   â”‚   â”œâ”€â”€ mapper/InvestmentInfoMapper.java
â”‚   â”‚   â”œâ”€â”€ service/InvestmentInfoService.java
â”‚   â”‚   â””â”€â”€ controller/InvestmentInfoController.java
â”‚   â”œâ”€â”€ src/main/resources/application.yml
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ pom.xml
â”œâ”€â”€ stock-correlation-service/       # çœä»½å…³è”æœåŠ¡ (8084) âœ…
â”‚   â”œâ”€â”€ src/main/java/com/stock/correlation/
â”‚   â”‚   â”œâ”€â”€ CorrelationServiceApplication.java
â”‚   â”‚   â”œâ”€â”€ entity/RelatedProvince.java
â”‚   â”‚   â”œâ”€â”€ mapper/RelatedProvinceMapper.java
â”‚   â”‚   â”œâ”€â”€ service/CorrelationService.java
â”‚   â”‚   â””â”€â”€ controller/CorrelationController.java
â”‚   â”œâ”€â”€ src/main/resources/application.yml
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ pom.xml
â”œâ”€â”€ frontend/                        # å‰ç«¯é¡¹ç›® (5173)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ router/
â”‚   â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â””â”€â”€ api/
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ sql/                            # æ•°æ®åº“è„šæœ¬
â”‚   â””â”€â”€ init.sql
â”œâ”€â”€ é¡¹ç›®è¯´æ˜.md                       # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ å¿«é€Ÿå¯åŠ¨æŒ‡å—.md                   # å¿«é€Ÿå¯åŠ¨æŒ‡å— â­
â”œâ”€â”€ å¾®æœåŠ¡æ¶æ„è¯´æ˜.md                # å¾®æœåŠ¡æ¶æ„è¯´æ˜
â”œâ”€â”€ å¾®æœåŠ¡æ”¹é€ æ€»ç»“.md        # å¾®æœåŠ¡æ”¹é€ æ€»ç»“ â­
â”œâ”€â”€ å¾®æœåŠ¡æ”¹é€ å®ŒæˆæŠ¥å‘Š.md # æ”¹é€ å®ŒæˆæŠ¥å‘Š
â”œâ”€â”€ APIæ¥å£æ–‡æ¡£.md                          # APIæ–‡æ¡£
â””â”€â”€ éƒ¨ç½²æ–‡æ¡£.md                       # éƒ¨ç½²æ–‡æ¡£
```

## åŠŸèƒ½ç‰¹æ€§
1. ç”¨æˆ·ç™»å½•è®¤è¯
2. åŸºäºä¸­å›½åœ°å›¾çš„æŠ•èµ„ä¿¡æ¯å¯è§†åŒ–
3. çœä»½ç‚¹å‡»äº¤äº’ï¼Œæ˜¾ç¤ºè¯¥çœä»½è¿‘æœŸ10æ¡æŠ•èµ„ä¿¡æ¯
4. å…³è”çœä»½é«˜äº®æç¤º
5. å®æ—¶æ•°æ®æ›´æ–°ï¼ˆé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—ï¼‰

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- JDK 1.8+ (æ¨èä½¿ç”¨JDK 8/11/17/21/25)
  - å½“å‰ç³»ç»ŸJDK: OpenJDK 25.0.1
  - é¡¹ç›®ç¼–è¯‘ç›®æ ‡: Java 1.8
  - Mavenå·²é…ç½®å‘ä¸‹å…¼å®¹ï¼Œå¯ä½¿ç”¨é«˜ç‰ˆæœ¬JDKç¼–è¯‘Java 8ä»£ç 
- Node.js 16+
- MySQL 8.0+
  - é»˜è®¤ç”¨æˆ·: root
  - é»˜è®¤å¯†ç : root
- Redis 5.0+
- RabbitMQ 3.8+
- Docker & Docker Compose (å¯é€‰ï¼Œç”¨äºå®¹å™¨åŒ–éƒ¨ç½²)

### æ–¹å¼ä¸€ï¼šDocker Composeéƒ¨ç½²ï¼ˆæ¨èï¼‰

#### 1. é…ç½®ç¯å¢ƒå˜é‡
```bash
# å¤åˆ¶ç¯å¢ƒé…ç½®æ¨¡æ¿
cp .env.template .env

# ç¼–è¾‘.envæ–‡ä»¶ï¼Œå¡«å†™å®é™…é…ç½®ï¼ˆç‰¹åˆ«æ˜¯TUSHARE_TOKENï¼‰
vim .env
```

#### 2. å¯åŠ¨æ‰€æœ‰æœåŠ¡
```bash
# æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆåŒ…æ‹¬MySQLã€Redisã€RabbitMQå’Œæ‰€æœ‰å¾®æœåŠ¡ï¼‰
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

#### 3. åœæ­¢æœåŠ¡
```bash
docker-compose down
```

### æ–¹å¼äºŒï¼šæœ¬åœ°éƒ¨ç½²

#### 1. æ•°æ®åº“åˆå§‹åŒ–
```bash
mysql -u root -p < sql/init.sql
```

#### 2. é…ç½®Tushare Tokenï¼ˆå¯é€‰ï¼‰
ç¼–è¾‘ `stock-data-service/src/main/resources/application.yml`ï¼š
```yaml
tushare:
  token: your_tushare_token_here
```

#### 3. å¯åŠ¨æ‰€æœ‰å¾®æœåŠ¡
```bash
# ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
chmod +x start-all.sh
./start-all.sh

# æˆ–æ‰‹åŠ¨å¯åŠ¨å„æœåŠ¡
mvn clean package -DskipTests
cd stock-gateway && mvn spring-boot:run &
cd stock-auth-service && mvn spring-boot:run &
cd stock-data-service && mvn spring-boot:run &
cd stock-investment-service && mvn spring-boot:run &
cd stock-correlation-service && mvn spring-boot:run &
```

#### 4. å¯åŠ¨å‰ç«¯
```bash
cd frontend
npm install
npm run dev
```

#### 5. è®¿é—®ç³»ç»Ÿ
- å‰ç«¯: http://localhost:5173
- APIç½‘å…³: http://localhost:8080
- é»˜è®¤è´¦å·: admin / 123456

## ğŸ“š é¡¹ç›®æ–‡æ¡£

- **[å¿«é€Ÿå¯åŠ¨æŒ‡å—](å¿«é€Ÿå¯åŠ¨æŒ‡å—.md)** â­ - 3åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹
- **[å¾®æœåŠ¡æ”¹é€ æ€»ç»“](å¾®æœåŠ¡æ”¹é€ æ€»ç»“.md)** â­ - æ”¹é€ æˆæœå’ŒæŠ€æœ¯ç»†èŠ‚
- **[å¾®æœåŠ¡æ¶æ„è¯´æ˜](å¾®æœåŠ¡æ¶æ„è¯´æ˜.md)** - æ¶æ„è®¾è®¡å’ŒæœåŠ¡è¯´æ˜
- **[æ”¹é€ å®ŒæˆæŠ¥å‘Š](å¾®æœåŠ¡æ”¹é€ å®ŒæˆæŠ¥å‘Š.md)** - è¯¦ç»†çš„æ”¹é€ è¿‡ç¨‹
- **[å¾®æœåŠ¡æ¶æ„æ£€æŸ¥æŠ¥å‘Š](å¾®æœåŠ¡æ¶æ„æ£€æŸ¥æ¸…å•.md)** - æ¶æ„æ ‡å‡†æ£€æŸ¥å’Œè¯„åˆ†
- **[APIæ–‡æ¡£](APIæ¥å£æ–‡æ¡£.md)** - APIæ¥å£æ–‡æ¡£
- **[éƒ¨ç½²æ–‡æ¡£](éƒ¨ç½²æ–‡æ¡£.md)** - éƒ¨ç½²æŒ‡å—

## ğŸ”§ é…ç½®è¯´æ˜

### JWTé…ç½®
ç½‘å…³å’Œè®¤è¯æœåŠ¡éœ€è¦ä½¿ç”¨ç›¸åŒçš„JWTå¯†é’¥ï¼š
```yaml
jwt:
  secret: stock-investment-system-jwt-secret-key-2024
  expiration: 86400000
```

### æ•°æ®åº“é…ç½®
å„æœåŠ¡ç‹¬ç«‹é…ç½®æ•°æ®åº“è¿æ¥ï¼š
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/stock_db
    username: root
    password: root
```

### Redisé…ç½®
```yaml
spring:
  redis:
    host: localhost
    port: 6379
```

### RabbitMQé…ç½®
```yaml
spring:
  rabbitmq:
    host: localhost
    port: 5672
    username: guest
    password: guest
```

## è®¿é—®åœ°å€
- å‰ç«¯: http://localhost:5173
- APIç½‘å…³: http://localhost:8080
- è®¤è¯æœåŠ¡: http://localhost:8081
- è‚¡ç¥¨æ•°æ®æœåŠ¡: http://localhost:8082
- æŠ•èµ„ä¿¡æ¯æœåŠ¡: http://localhost:8083
- çœä»½å…³è”æœåŠ¡: http://localhost:8084
- é»˜è®¤è´¦å·: admin / 123456

## ä¸»è¦åŠŸèƒ½è¯´æ˜

### åœ°å›¾äº¤äº’
- ç‚¹å‡»çœä»½ï¼šè¯¥çœä»½è§†è§‰ä¸Šæµ®èµ·ï¼Œæ˜¾ç¤ºæŠ•èµ„ä¿¡æ¯
- å…³è”æç¤ºï¼šé«˜äº®æ˜¾ç¤ºæœ‰ç›¸å…³æŠ•èµ„ä¿¡æ¯çš„å…¶ä»–çœä»½
- æ•°æ®å±•ç¤ºï¼šæ˜¾ç¤ºè¯¥çœä»½è¿‘æœŸ10æ¡æŠ•èµ„ä¿¡æ¯

### å¾®æœåŠ¡åŠŸèƒ½
- âœ… ç”¨æˆ·ç™»å½•è®¤è¯ï¼ˆJWTï¼‰
- âœ… APIç½‘å…³ç»Ÿä¸€å…¥å£
- âœ… æœåŠ¡ç‹¬ç«‹éƒ¨ç½²
- âœ… å®æ—¶è‚¡ç¥¨æ•°æ®è·å–
- âœ… Redisç¼“å­˜ä¼˜åŒ–
- âœ… RabbitMQæ¶ˆæ¯é˜Ÿåˆ—
- âœ… æœåŠ¡å¥åº·æ£€æŸ¥

## ğŸ› æ•…éšœæ’æŸ¥

### æœåŠ¡å¯åŠ¨å¤±è´¥
```bash
# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
tail -f stock-*/logs/*.log

# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :8080
```

### ç½‘å…³è·¯ç”±ä¸é€š
```bash
# æ£€æŸ¥ç›®æ ‡æœåŠ¡æ˜¯å¦å¯åŠ¨
curl http://localhost:8081/actuator/health
curl http://localhost:8082/actuator/health
```

### æ•°æ®åº“è¿æ¥å¤±è´¥
```bash
# æ£€æŸ¥MySQLæ˜¯å¦å¯åŠ¨
mysql -u root -p -e "SELECT 1"
```

## æ—¥å¿—ç³»ç»Ÿ

æ¯ä¸ªå¾®æœåŠ¡éƒ½æœ‰ç‹¬ç«‹çš„æ—¥å¿—æ–‡ä»¶ï¼Œå­˜å‚¨åœ¨å„è‡ªçš„ `logs/` ç›®å½•ä¸‹ï¼š

```bash
# æŸ¥çœ‹ç½‘å…³æ—¥å¿—
tail -f stock-gateway/logs/gateway.log

# æŸ¥çœ‹è®¤è¯æœåŠ¡æ—¥å¿—
tail -f stock-auth-service/logs/auth.log

# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
tail -f stock-*/logs/*.log
```

## ğŸ“ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„å¾®æœåŠ¡

1. åœ¨çˆ¶POMä¸­æ·»åŠ æ¨¡å—
2. åˆ›å»ºæœåŠ¡ç›®å½•å’Œpom.xml
3. å®ç°æœåŠ¡ä»£ç 
4. åœ¨ç½‘å…³ä¸­é…ç½®è·¯ç”±
5. æ›´æ–°å¯åŠ¨è„šæœ¬

### æœåŠ¡é—´é€šä¿¡

- **åŒæ­¥é€šä¿¡**: HTTP/RESTï¼ˆé€šè¿‡ç½‘å…³ï¼‰
- **å¼‚æ­¥é€šä¿¡**: RabbitMQæ¶ˆæ¯é˜Ÿåˆ—
- **æ•°æ®å…±äº«**: Redisç¼“å­˜

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- Redisç¼“å­˜çƒ­ç‚¹æ•°æ®
- æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
- æœåŠ¡ç‹¬ç«‹æ‰©å±•
- æ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥å¤„ç†

## ğŸ” å®‰å…¨ç‰¹æ€§

- JWT Tokenè®¤è¯
- å¯†ç åŠ å¯†å­˜å‚¨
- APIç½‘å…³ç»Ÿä¸€é‰´æƒ
- CORSè·¨åŸŸé…ç½®

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License
